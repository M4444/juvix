# Compiler


<!-- https://q.uiver.app/?q=WzAsMjksWzAsNCwiXFx0ZXh0e0p1dml4IGZpbGV9Il0sWzIsNCwiXFx0ZXh0e1NlcmlhbGlzZWQgKEFTVCl9Il0sWzUsNCwiXFx0ZXh0e0Rlc3VnYXJlZH0iXSxbMiw2LCJcXHRleHR7Q29yZX0iXSxbMiw4LCJcXHRleHR7RXJhc2VkfSJdLFsyLDEwLCJcXHRleHR7TExWTSB8IE1pY2hlbHNvbiB8IENpcmN1aXR9Il0sWzIsMywiXFxidWxsZXQiXSxbMiwyLCJcXGJ1bGxldCJdLFsyLDEsIlxcYnVsbGV0Il0sWzIsMCwiXFxidWxsZXQiXSxbNCwwLCJcXGJ1bGxldCJdLFs1LDAsIlxcYnVsbGV0Il0sWzUsMSwiXFxidWxsZXQiXSxbNSwyLCJcXGJ1bGxldCJdLFs4LDQsIlxcdGV4dHtDb250ZXh0aWZpZWR9Il0sWzYsNCwiXFx0ZXh0e0Rlc3VnYXJlZH0iXSxbNiwzLCJcXGJ1bGxldCJdLFs2LDEsIlxcYnVsbGV0Il0sWzgsMSwiXFxidWxsZXQiXSxbOCw1LCJcXGJ1bGxldCJdLFs4LDYsIlxcYnVsbGV0Il0sWzcsNiwiXFxidWxsZXQiXSxbNSw2LCJcXGJ1bGxldCJdLFs1LDMsIlxcYnVsbGV0Il0sWzcsOSwiXFxidWxsZXQiXSxbOCw5LCJcXGJ1bGxldCJdLFs3LDEwLCJcXGJ1bGxldCJdLFs4LDEwLCJcXGJ1bGxldCJdLFs4LDMsIlxcYnVsbGV0Il0sWzEsMiwiZGVzdWdhciIsMCx7ImNvbG91ciI6WzI0MCw2MCw2MF19LFsyNDAsNjAsNjAsMV1dLFsxLDYsIm1vZHVsZSBcXHRvIGZ1biIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFs2LDcsImxldFxcdGV4dHstfW1vZCBcXHRvIGxldCIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFs4LDksImlmIFxccmlnaHRhcnJvdyBjYXNlIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzksMTAsImxldCBcXHRvIGxldFxcdGV4dHstfW1hdGNoIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzExLDEyLCJkZWZcXHRleHR7LX1zaWcgKyBkZWZ1blxcdGV4dHstfW1hdGNoIFxcdG8gZGVzaWdcXHRleHR7LX1tYXRjaCAgIiwyLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzEyLDEzLCJyZWNvcmQgXFx0byByZWNvcmRcXHRleHR7LX1ub1xcdGV4dHstfXB1biIsMix7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsxMCwxMSwiZGVmdW4gIFxcdG8gZGVmdW5cXHRleHR7LX1tYXRjaCIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsyLDE1LCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxNSwxNiwicmVzb2x2ZVxcIG9wZW4iLDIseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMTYsMTcsInJlc29sdmVcXCBvcGVuXFwgaW4iLDIseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMTcsMTgsInF1YWxpZnlcXCBuYW1lIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzE1LDE0LCJjb250ZXh0aWZ5IiwwLHsiY29sb3VyIjpbMjQwLDYwLDYwXX0sWzI0MCw2MCw2MCwxXV0sWzE5LDIwLCJcXHRleHRpdHt0eXBlIGNoZWNrZXJ9IiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzIwLDIxLCJcXHRleHRpdHt1bmlmaWVyfSIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsyMSwyMiwiXFx0ZXh0aXR7dGVybWluYXRpb24gY2hlY2tlcn0iLDAseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMywwLCJcXG1hdGhzZntkZXN0aWxhdGlvbn0iLDEseyJjb2xvdXIiOlswLDAsNTBdLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19LFswLDAsNTAsMV1dLFszLDQsImVyYXN1cmUiLDEseyJjb2xvdXIiOlsyNDAsNjAsNjBdfSxbMjQwLDYwLDYwLDFdXSxbNCw1LCJjb21waWxlIiwxLHsiY29sb3VyIjpbMjQwLDYwLDYwXX0sWzI0MCw2MCw2MCwxXV0sWzEzLDIzLCJkZWZIYW5kbGVyIFxcdG8gZGVmXFx0ZXh0ey19aGFuZGxlciIsMix7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsyMywyLCJcXHRleHRpdHtyZWNvcmQtc30gXFxyaWdodGFycm93IFxcdGV4dGl0e3JlY29yZC10eX0iLDIseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMjQsMjUsIm1haW5cXCBzdGVwIiwwLHsiY29sb3VyIjpbMjQwLDYwLDYwXX0sWzI0MCw2MCw2MCwxXV0sWzI2LDI3LCJzZWNvbmRhcnlcXCBzdGVwIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzI4LDE0LCJcXHRleHRpdHtsb29rdXAgcmVjb3JkIGZpZWxkc30iLDAseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMTgsMjgsInJlc29sdmVcXCBpbmZpeCIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsyMiwzLCJcXHRleHRpdHtjbGF1c2VzIHRvIGNhc2UgdHJlZXN9IiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzAsMSwicGFyc2UiLDAseyJjb2xvdXIiOlsyNDAsNjAsNjBdfSxbMjQwLDYwLDYwLDFdXSxbMTQsMywiZWxhYm9yYXRpb24iLDEseyJjb2xvdXIiOlsyNDAsNjAsNjBdfSxbMjQwLDYwLDYwLDFdXSxbMTQsMTksIlxcdGV4dGl0e3Njb3BlIGNoZWNrZXJ9IiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzcsOCwiY29uZCBcXHRvIGlmIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV1d -->
<iframe class="quiver-embed" src="https://q.uiver.app/?q=WzAsMjksWzAsNCwiXFx0ZXh0e0p1dml4IGZpbGV9Il0sWzIsNCwiXFx0ZXh0e1NlcmlhbGlzZWQgKEFTVCl9Il0sWzUsNCwiXFx0ZXh0e0Rlc3VnYXJlZH0iXSxbMiw2LCJcXHRleHR7Q29yZX0iXSxbMiw4LCJcXHRleHR7RXJhc2VkfSJdLFsyLDEwLCJcXHRleHR7TExWTSB8IE1pY2hlbHNvbiB8IENpcmN1aXR9Il0sWzIsMywiXFxidWxsZXQiXSxbMiwyLCJcXGJ1bGxldCJdLFsyLDEsIlxcYnVsbGV0Il0sWzIsMCwiXFxidWxsZXQiXSxbNCwwLCJcXGJ1bGxldCJdLFs1LDAsIlxcYnVsbGV0Il0sWzUsMSwiXFxidWxsZXQiXSxbNSwyLCJcXGJ1bGxldCJdLFs4LDQsIlxcdGV4dHtDb250ZXh0aWZpZWR9Il0sWzYsNCwiXFx0ZXh0e0Rlc3VnYXJlZH0iXSxbNiwzLCJcXGJ1bGxldCJdLFs2LDEsIlxcYnVsbGV0Il0sWzgsMSwiXFxidWxsZXQiXSxbOCw1LCJcXGJ1bGxldCJdLFs4LDYsIlxcYnVsbGV0Il0sWzcsNiwiXFxidWxsZXQiXSxbNSw2LCJcXGJ1bGxldCJdLFs1LDMsIlxcYnVsbGV0Il0sWzcsOSwiXFxidWxsZXQiXSxbOCw5LCJcXGJ1bGxldCJdLFs3LDEwLCJcXGJ1bGxldCJdLFs4LDEwLCJcXGJ1bGxldCJdLFs4LDMsIlxcYnVsbGV0Il0sWzEsMiwiZGVzdWdhciIsMCx7ImNvbG91ciI6WzI0MCw2MCw2MF19LFsyNDAsNjAsNjAsMV1dLFsxLDYsIm1vZHVsZSBcXHRvIGZ1biIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFs2LDcsImxldFxcdGV4dHstfW1vZCBcXHRvIGxldCIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFs4LDksImlmIFxccmlnaHRhcnJvdyBjYXNlIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzksMTAsImxldCBcXHRvIGxldFxcdGV4dHstfW1hdGNoIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzExLDEyLCJkZWZcXHRleHR7LX1zaWcgKyBkZWZ1blxcdGV4dHstfW1hdGNoIFxcdG8gZGVzaWdcXHRleHR7LX1tYXRjaCAgIiwyLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzEyLDEzLCJyZWNvcmQgXFx0byByZWNvcmRcXHRleHR7LX1ub1xcdGV4dHstfXB1biIsMix7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsxMCwxMSwiZGVmdW4gIFxcdG8gZGVmdW5cXHRleHR7LX1tYXRjaCIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsyLDE1LCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxNSwxNiwicmVzb2x2ZVxcIG9wZW4iLDIseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMTYsMTcsInJlc29sdmVcXCBvcGVuXFwgaW4iLDIseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMTcsMTgsInF1YWxpZnlcXCBuYW1lIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzE1LDE0LCJjb250ZXh0aWZ5IiwwLHsiY29sb3VyIjpbMjQwLDYwLDYwXX0sWzI0MCw2MCw2MCwxXV0sWzE5LDIwLCJcXHRleHRpdHt0eXBlIGNoZWNrZXJ9IiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzIwLDIxLCJcXHRleHRpdHt1bmlmaWVyfSIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsyMSwyMiwiXFx0ZXh0aXR7dGVybWluYXRpb24gY2hlY2tlcn0iLDAseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMywwLCJcXG1hdGhzZntkZXN0aWxhdGlvbn0iLDEseyJjb2xvdXIiOlswLDAsNTBdLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19LFswLDAsNTAsMV1dLFszLDQsImVyYXN1cmUiLDEseyJjb2xvdXIiOlsyNDAsNjAsNjBdfSxbMjQwLDYwLDYwLDFdXSxbNCw1LCJjb21waWxlIiwxLHsiY29sb3VyIjpbMjQwLDYwLDYwXX0sWzI0MCw2MCw2MCwxXV0sWzEzLDIzLCJkZWZIYW5kbGVyIFxcdG8gZGVmXFx0ZXh0ey19aGFuZGxlciIsMix7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsyMywyLCJcXHRleHRpdHtyZWNvcmQtc30gXFxyaWdodGFycm93IFxcdGV4dGl0e3JlY29yZC10eX0iLDIseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMjQsMjUsIm1haW5cXCBzdGVwIiwwLHsiY29sb3VyIjpbMjQwLDYwLDYwXX0sWzI0MCw2MCw2MCwxXV0sWzI2LDI3LCJzZWNvbmRhcnlcXCBzdGVwIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzI4LDE0LCJcXHRleHRpdHtsb29rdXAgcmVjb3JkIGZpZWxkc30iLDAseyJjb2xvdXIiOlswLDAsNTBdfSxbMCwwLDUwLDFdXSxbMTgsMjgsInJlc29sdmVcXCBpbmZpeCIsMCx7ImNvbG91ciI6WzAsMCw1MF19LFswLDAsNTAsMV1dLFsyMiwzLCJcXHRleHRpdHtjbGF1c2VzIHRvIGNhc2UgdHJlZXN9IiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzAsMSwicGFyc2UiLDAseyJjb2xvdXIiOlsyNDAsNjAsNjBdfSxbMjQwLDYwLDYwLDFdXSxbMTQsMywiZWxhYm9yYXRpb24iLDEseyJjb2xvdXIiOlsyNDAsNjAsNjBdfSxbMjQwLDYwLDYwLDFdXSxbMTQsMTksIlxcdGV4dGl0e3Njb3BlIGNoZWNrZXJ9IiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV0sWzcsOCwiY29uZCBcXHRvIGlmIiwwLHsiY29sb3VyIjpbMCwwLDUwXX0sWzAsMCw1MCwxXV1d&embed" width="100%" height="500" style="border-radius: 8px; border: none;"></iframe>

Here's an overview of each step in the compiler with a brief description of them:

- [Frontend](./frontend/index.md)


  - **Parse**:
      Break up Juvix syntax into an AST

  - **Desugar**:
      Translate structure to compiler-friendly terms
      - *Serialise*:
      Convert AST to S-expression
      - *Desugar S-Expressions*:
      Strip away high-level constructs from the source (see [s-expression syntax](./frontend/s-expression-syntax))
      - *Deserialise*:
      Convert S-expression back to AST
  - **Contextify**
      - *Resolve Open*:
      Construct a map of terms to the modules where they were defined
      - *Resolve Open In*

      - *Qualify Names*:
      Replace term names with their qualified names

      - *Resolve Infix*:
      Shunting-yard algorithm. Needs context for infixivity

      - *Lookup Record Fields*
- [Core](./core/index.md)
  - **Elaboration**
      - *Scope checker*:
      Replaces bound names with de Bruijn indices
      - *Type checker*:
        - Input:
          - Global env
          - Unification problems
          - Declaration or signature
        - Output:
          - AST with types on each node
          - Record matches completed & reordered
          - Implicit arguments inserted as metas
          - Unification problems
          - Universe graph
      - *Unifier*:
        - Input: problems (over *values*)
        - Output: (if successful) partial subst, blocked problems
      - *Termination checker*
      - *Compile clauses to case trees* {footcite}`case-trees`


- [Backends](backends/index.md)

  - *LLVM* (default)
  - *Michelson*
  - *Circuit*

----------

```{toctree}
---
maxdepth: 1
---

frontend/index
core/index
backends/index
```

----------

```{footbibliography}
```
